var inputEx={spacerUrl:"images/space.gif",messages:{required:"This field is required",invalid:"This field is invalid",valid:"This field is valid"},regexps:{email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ipv4:/^(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)(?:\.(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)){3}$/,url:/^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$/i},typeClasses:{},registerType:function(A,B){if(typeof A!="string"){throw new Error("inputEx.registerType: first argument must be a string")}if(typeof B!="function"){throw new Error("inputEx.registerType: second argument must be a function")}this.typeClasses[A]=B},getFieldClass:function(A){if(typeof this.typeClasses[A]=="function"){return this.typeClasses[A]}return null},getType:function(A){for(var B in this.typeClasses){if(this.typeClasses.hasOwnProperty(B)){if(this.typeClasses[A]){return B}}}return null},sn:function(D,C,A){if(!D){return }if(C){for(var B in C){var F=C[B];if(typeof (F)=="function"){continue}if(B=="className"){B="class";D.className=F}if(F!==D.getAttribute(B)){try{if(F===false){D.removeAttribute(B)}else{D.setAttribute(B,F)}}catch(E){}}}}if(A){for(var B in A){if(typeof (A[B])=="function"){continue}if(D.style[B]!=A[B]){D.style[B]=A[B]}}}},cn:function(A,C,B,E){var D=document.createElement(A);this.sn(D,C,B);if(E){D.innerHTML=E}return D}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(B){for(var A=0;A<this.length;A++){if(this[A]==B){return A}}return -1}}if(!Array.prototype.compact){Array.prototype.compact=function(){var B=[];for(var A=0;A<this.length;A++){if(this[A]){B.push(this[A])}}return B}}inputEx.Field=function(A){this.options=A||{};this.setOptions();this.render();if(this.options.value){this.setValue(this.options.value)}this.updatedEvt=new YAHOO.util.CustomEvent("updated",this);this.initEvents();this.setClassFromState()};inputEx.Field.prototype.setOptions=function(){this.options.messages=this.options.messages||{};this.options.messages.required=this.options.messages.required||inputEx.messages.required;this.options.messages.invalid=this.options.messages.invalid||inputEx.messages.invalid;this.options.messages.valid=this.options.messages.valid||inputEx.messages.valid;this.options.size=this.options.size||20;this.options.className=this.options.className||"inputEx-Field";this.options.required=this.options.required?true:false;this.options.tooltipIcon=this.options.tooltipIcon?true:false};inputEx.Field.prototype.render=function(){this.divEl=inputEx.cn("div",{className:this.options.className});this.renderComponent();if(this.options.tooltipIcon){this.tooltipIcon=inputEx.cn("img",{src:inputEx.spacerUrl,className:"inputEx-Field-stateIcon"});if(!inputEx.tooltipCount){inputEx.tooltipCount=0}this.tooltip=new YAHOO.widget.Tooltip("inputEx-tooltip-"+(inputEx.tooltipCount++),{context:this.tooltipIcon,text:""});this.divEl.appendChild(this.tooltipIcon)}};inputEx.Field.prototype.renderComponent=function(){var A={};A.type="text";A.size=this.options.size;if(this.options.name){A.name=this.options.name}this.el=inputEx.cn("input",A);this.divEl.appendChild(this.el)};inputEx.Field.prototype.getEl=function(){return this.divEl};inputEx.Field.prototype.initEvents=function(){var A=this;YAHOO.util.Event.addListener(this.el,"keypress",function(B){setTimeout(function(){A.onInput(B)},50)});YAHOO.util.Event.addListener(this.el,"change",this.onChange,this,true);YAHOO.util.Event.addListener(this.el,"focus",this.onFocus,this,true);YAHOO.util.Event.addListener(this.el,"blur",this.onBlur,this,true)};inputEx.Field.prototype.getValue=function(){return this.el.value};inputEx.Field.prototype.setValue=function(A){this.el.value=A};inputEx.Field.prototype.setClassFromState=function(){if(this.previousState){YAHOO.util.Dom.removeClass(this.getEl(),"inputEx-"+this.previousState)}this.previousState=this.getState();YAHOO.util.Dom.addClass(this.getEl(),"inputEx-"+this.previousState);this.setToolTipMessage()};inputEx.Field.prototype.setToolTipMessage=function(){if(this.tooltip){var A="";if(this.previousState=="required"){A='<div class="inputEx-tooltip-required"></div> <span>'+this.options.messages.required+"</span>"}else{if(this.previousState=="invalid"){A='<div class="inputEx-tooltip-exclamation"></div> <span>'+this.options.messages.invalid+"</span>"}else{A='<div class="inputEx-tooltip-validated"></div> <span>'+this.options.messages.valid+"</span>"}}this.tooltip.setBody(A)}};inputEx.Field.prototype.onFocus=function(A){YAHOO.util.Dom.addClass(this.getEl(),"inputEx-focused")};inputEx.Field.prototype.onBlur=function(A){YAHOO.util.Dom.removeClass(this.getEl(),"inputEx-focused")};inputEx.Field.prototype.getState=function(){if(this.getValue()===""){return this.options.required?inputEx.Field.stateRequired:inputEx.Field.stateEmpty}return this.validate()?inputEx.Field.stateValid:inputEx.Field.stateInvalid};inputEx.Field.stateEmpty="empty";inputEx.Field.stateRequired="required";inputEx.Field.stateValid="valid";inputEx.Field.stateInvalid="invalid";inputEx.Field.prototype.validate=function(){if(this.options.regexp){return this.getValue().match(this.options.regexp)}return true};inputEx.Field.prototype.onInput=function(A){if(this.options.numbersOnly){this.setValue(this.getValue().replace(/[^0-9]/g,""))}this.setClassFromState()};inputEx.Field.prototype.onChange=function(B){this.setClassFromState();if(this.validate()){var A=this;setTimeout(function(){A.updatedEvt.fire(A.getValue())},50)}};inputEx.Field.prototype.close=function(){};inputEx.Field.prototype.disable=function(){this.el.disabled=true};inputEx.Field.prototype.enable=function(){this.el.disabled=false};inputEx.registerType("string",inputEx.Field);inputEx.Group=function(A){this.inputConfigs=A;this.inputs=[];this.render();this.updatedEvt=new YAHOO.util.CustomEvent("updated",this);this.updatedEvt.subscribe(function(C,D){var B=D[0];console.log("updated",B)},this,true);this.initEvents()};inputEx.Group.prototype={render:function(){this.divEl=inputEx.cn("div",{className:"inputEx-Group"});this.renderFields(this.divEl)},renderFields:function(E){var H=inputEx.cn("table");var F=inputEx.cn("tbody");H.appendChild(F);this.tableOptional=inputEx.cn("table",{className:"inputEx-Group-Options"},{display:"none"});var A=inputEx.cn("tbody");this.tableOptional.appendChild(A);for(var D=0;D<this.inputConfigs.length;D++){var J=this.inputConfigs[D];var G=inputEx.cn("tr");G.appendChild(inputEx.cn("td",{className:"inputEx-Group-label"},null,J.label||""));var I=this.renderField(J);var B=inputEx.cn("td");B.appendChild(I.getEl());G.appendChild(B);var C=J.optional?A:F;C.appendChild(G)}E.appendChild(H);if(A.childNodes.length>0){this.optionsLabel=inputEx.cn("div",{className:"inputEx-Group-Options-Label inputEx-Group-Options-Label-Collapsed"});this.optionsLabel.appendChild(inputEx.cn("img",{src:inputEx.spacerUrl}));this.optionsLabel.appendChild(inputEx.cn("span",null,null,"Options"));E.appendChild(this.optionsLabel);E.appendChild(this.tableOptional)}},renderField:function(A){var B=null;if(A.type){B=inputEx.getFieldClass(A.type);if(B===null){B=inputEx.Field}}else{B=A.fieldClass?A.fieldClass:inputEx.Field}var C=new B(A.inputParams);this.inputs.push(C);C.updatedEvt.subscribe(this.onChange,this,true);return C},initEvents:function(){YAHOO.util.Event.addListener(this.optionsLabel,"click",this.onClickOptionsLabel,this,true)},onClickOptionsLabel:function(){if(this.tableOptional.style.display=="none"){this.tableOptional.style.display="";YAHOO.util.Dom.replaceClass(this.optionsLabel,"inputEx-Group-Options-Label-Collapsed","inputEx-Group-Options-Label-Expanded")}else{this.tableOptional.style.display="none";YAHOO.util.Dom.replaceClass(this.optionsLabel,"inputEx-Group-Options-Label-Expanded","inputEx-Group-Options-Label-Collapsed")}},getEl:function(){return this.divEl},validate:function(){for(var B=0;B<this.inputs.length;B++){var A=this.inputs[B];var C=A.getState();if(C==inputEx.Field.stateRequired||C==inputEx.Field.stateInvalid){return false}}return true},enable:function(){for(var A=0;A<this.inputs.length;A++){this.inputs[A].enable()}},disable:function(){for(var A=0;A<this.inputs.length;A++){this.inputs[A].disable()}},setValue:function(B){for(var A=0;A<this.inputs.length;A++){this.inputs[A].setValue(B[this.inputs[A].options.name]||"");this.inputs[A].setClassFromState()}},getValue:function(){var B={};for(var A=0;A<this.inputs.length;A++){if(this.inputs[A].options.name){B[this.inputs[A].options.name]=this.inputs[A].getValue()}}return B},close:function(){for(var A=0;A<this.inputs.length;A++){this.inputs[A].close()}},onChange:function(){if(this.validate()){this.updatedEvt.fire(this.getValue())}}};inputEx.Form=function(A,C,B){this.buttons=C||[];this.options=B||{};inputEx.Form.superclass.constructor.call(this,A)};YAHOO.extend(inputEx.Form,inputEx.Group,{render:function(){this.divEl=inputEx.cn("div",{className:"inputEx-Group"});this.form=inputEx.cn("form",{method:this.options.method||"POST",action:this.options.action||"",className:this.options.className||"inputEx-Form"});this.divEl.appendChild(this.form);this.form.setAttribute("autocomplete","off");if(this.options.formName){this.form.name=this.options.formName}this.renderFields(this.form);this.renderButtons()},renderButtons:function(){var C,A;for(var B=0;B<this.options.buttons.length;B++){C=this.options.buttons[B];A=inputEx.cn("input",{type:C.type,value:C.value});if(C.onClick){A.onclick=C.onClick}this.divEl.appendChild(A)}},initEvents:function(){inputEx.Form.superclass.initEvents.call(this);YAHOO.util.Event.addListener(this.form,"submit",this.options.onSubmit||this.onSubmit,this,true)},onSubmit:function(A){if(!this.validate()){YAHOO.util.Event.stopEvent(A)}}});inputEx.CheckBox=function(A){inputEx.CheckBox.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.CheckBox,inputEx.Field,{setOptions:function(){inputEx.CheckBox.superclass.setOptions.call(this);this.sentValues=this.options.sentValues||[true,false];this.checkedValue=this.sentValues[0];this.uncheckedValue=this.sentValues[1]},renderComponent:function(){this.el=inputEx.cn("input",{type:"checkbox",checked:(this.options.checked===false)?false:true});this.divEl.appendChild(this.el);this.label=inputEx.cn("label",{className:"inputExForm-checkbox-rightLabel"},null,this.options.label||"");this.divEl.appendChild(this.label);this.hiddenEl=inputEx.cn("input",{type:"hidden",name:this.options.name||"",value:this.el.checked?this.checkedValue:this.uncheckedValue});this.divEl.appendChild(this.hiddenEl)},initEvents:function(){YAHOO.util.Event.addListener(this.el,"change",this.onChange,this,true)},onChange:function(A){this.hiddenEl.value=this.el.checked?this.checkedValue:this.uncheckedValue;inputEx.CheckBox.superclass.onChange.call(this,A)},getValue:function(){return this.el.checked?this.checkedValue:this.uncheckedValue},setValue:function(A){if(A===this.checkedValue){this.hiddenEl.value=A;this.el.checked=true}else{if(A===this.uncheckedValue){this.hiddenEl.value=A;this.el.checked=false}else{throw"Wrong value assignment in checkBox input"}}}});inputEx.registerType("boolean",inputEx.CheckBox);inputEx.ColorField=function(A){inputEx.ColorField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.ColorField,inputEx.Field,{renderComponent:function(){this.el=inputEx.cn("input",{type:"hidden",name:this.options.name||"",value:this.options.value||"#DD7870"});this.colorEl=inputEx.cn("div",{className:"inputEx-ColorField"},{backgroundColor:this.el.value});this.renderPopUp();this.divEl.appendChild(this.el);this.divEl.appendChild(this.colorEl)},initEvents:function(){YAHOO.util.Event.addListener(this.colorEl,"click",this.toggleColorPopUp,this,true);YAHOO.util.Event.addListener(this.colorEl,"blur",this.closeColorPopUp,this,true)},toggleColorPopUp:function(){if(this.visible){this.colorPopUp.style.display="none"}else{this.colorPopUp.style.display="block"}this.visible=!this.visible},close:function(){this.closeColorPopUp()},closeColorPopUp:function(){this.colorPopUp.style.display="none";this.visible=false},renderPopUp:function(){this.displayTitle=this.options.displayTitle||false;var C=this.options.auto||1;this.colors=this.options.colors||this.setDefaultColors(C);this.length=this.colors.length;this.ratio=this.options.ratio||[16,9];this.squaresPerLine=Math.ceil(Math.sqrt(this.length*this.ratio[0]/this.ratio[1]));this.squaresPerColumn=Math.ceil(this.length/this.squaresPerLine);this.squaresOnLastLine=this.squaresPerLine-(this.squaresPerLine*this.squaresPerColumn-this.length);var B=30*this.squaresPerLine+10;this.visible=false;this.colorPopUp=inputEx.cn("div",{className:"inputEx-ColorField-popup"},{width:B+"px",display:"none"});if(this.displayTitle){var D=inputEx.cn("div",null,null,inputEx.messages.selectColor);this.colorPopUp.appendChild(D)}var A=inputEx.cn("div");A.appendChild(this.renderColorGrid());this.colorPopUp.appendChild(A);this.divEl.appendChild(this.colorPopUp)},setValue:function(A){this.el.value=A;YAHOO.util.Dom.setStyle(this.colorEl,"background-color",this.el.value)},setDefaultColors:function(A){return inputEx.ColorField.palettes[A-1]},renderColorGrid:function(){var E=inputEx.cn("table");var C=inputEx.cn("tbody");for(var D=0;D<this.squaresPerColumn;D++){var A=inputEx.cn("tr");for(var B=0;B<this.squaresPerLine;B++){A.appendChild(inputEx.cn("td",null,{backgroundColor:"#fff",lineHeight:"10px",cursor:"default"},"&nbsp;"));var F=inputEx.cn("td",null,{backgroundColor:"#fff",lineHeight:"10px",cursor:"default"},"&nbsp;&nbsp;&nbsp;");if(D===(this.squaresPerColumn-1)&&B>=this.squaresOnLastLine){inputEx.sn(F,null,{backgroundColor:"#fff",cursor:"default"})}else{inputEx.sn(F,null,{backgroundColor:"#"+this.colors[D*this.squaresPerLine+B],cursor:"pointer"});YAHOO.util.Event.addListener(F,"mousedown",this.onColorClick,this,true)}A.appendChild(F)}C.appendChild(A);C.appendChild(inputEx.cn("tr",null,{height:"8px"}))}E.appendChild(C);return E},onColorClick:function(C){var B=YAHOO.util.Event.getTarget(C);var A=YAHOO.util.Dom.getStyle(B,"background-color");YAHOO.util.Dom.setStyle(this.colorEl,"background-color",A);var D=function(E){var G=function(M){var J=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");var I=16;var L=parseInt(M,10);var K;var H="";if(!isNaN(L)){if(L==""){return"00"}while(L>0){K=0;while(L/Math.pow(I,K++)>=I){}H+=J[Math.floor(L/Math.pow(I,K-1))];if(L%I==0){H+="0"}L=(L%Math.pow(I,K-1))}if(H.length==1){return"0"+H}return H}else{return 0}};var F=E.split(/([(,)])/);return"#"+G(F[2])+G(F[4])+G(F[6])};this.el.value=D(A);this.visible=!this.visible;this.colorPopUp.style.display="none";this.onChange()}});inputEx.messages.selectColor="Select a color :";inputEx.ColorField.palettes=[["FFEA99","FFFF66","FFCC99","FFCAB2","FF99AD","FFD6FF","FF6666","E8EEF7","ADC2FF","ADADFF","CCFFFF","D6EAAD","B5EDBC","CCFF99"],["55AAFF","FFAAFF","FF7FAA","FF0202","FFD42A","F9F93B","DF8181","FEE3E2","D47FFF","2AD4FF","2AFFFF","AAFFD4"],["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","F0F0F0"]];inputEx.registerType("color",inputEx.ColorField);inputEx.EmailField=function(A){inputEx.EmailField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.EmailField,inputEx.Field,{setOptions:function(){inputEx.EmailField.superclass.setOptions.call(this);this.options.messages.invalid=inputEx.messages.invalidEmail;this.options.regexp=inputEx.regexps.email},getValue:function(){return this.el.value.toLowerCase()}});inputEx.messages.invalidEmail="Invalid email, ex: sample@test.com";inputEx.registerType("email",inputEx.EmailField);inputEx.IPv4Field=function(A){inputEx.IPv4Field.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.IPv4Field,inputEx.Field,{setOptions:function(){inputEx.IPv4Field.superclass.setOptions.call(this);this.options.messages.invalid=inputEx.messages.invalidIPv4;this.options.regexp=inputEx.regexps.ipv4}});inputEx.messages.invalidIPv4="Invalid IPv4 address, ex: 192.168.0.1";inputEx.registerType("IPv4",inputEx.IPv4Field);inputEx.ListField=function(A){this.subFields=[];inputEx.ListField.superclass.constructor.call(this,A)};YAHOO.extend(inputEx.ListField,inputEx.Field,{setOptions:function(){inputEx.ListField.superclass.setOptions.call(this);this.options.className="inputEx-Field inputEx-ListField"},renderComponent:function(){this.addButton=inputEx.cn("img",{src:inputEx.spacerUrl,className:"inputEx-ListField-addButton"});this.divEl.appendChild(this.addButton);this.divEl.appendChild(inputEx.cn("span",null,{marginLeft:"4px"},this.options.listLabel))},initEvents:function(){YAHOO.util.Event.addListener(this.addButton,"click",function(){this.addElement()},this,true)},setValue:function(C){if(!C.length){return }for(var B=0;B<C.length;B++){if(B==this.subFields.length){this.addElement(C[B])}else{this.subFields[B].setValue(C[B])}}var A=this.subFields.length-C.length;if(A>0){for(var B=0;B<A;B++){this.removeElement(C.length)}}},getValue:function(){var A=[];for(var B=0;B<this.subFields.length;B++){A[B]=this.subFields[B].getValue()}return A},addElement:function(D){var A={};for(var C in this.options.elementOptions){if(this.options.elementOptions.hasOwnProperty(C)){A[C]=this.options.elementOptions[C]}}if(D){A.value=D}var B=this.renderSubField(A);this.subFields.push(B)},renderSubField:function(B){var D=inputEx.cn("div");var A=inputEx.cn("img",{src:inputEx.spacerUrl,className:"inputEx-ListField-delButton"});YAHOO.util.Event.addListener(A,"click",this.onDelete,this,true);D.appendChild(A);var E=new this.options.elementType(B);var C=E.getEl();YAHOO.util.Dom.setStyle(C,"margin-left","4px");YAHOO.util.Dom.setStyle(C,"float","left");D.appendChild(C);E.updatedEvt.subscribe(this.onChange,this,true);D.appendChild(inputEx.cn("div",null,{clear:"both"}));this.divEl.appendChild(D);return E},onDelete:function(E,F){var B=E.originalTarget.parentNode;var A=-1;var D=B.childNodes[1];for(var C=0;C<this.subFields.length;C++){if(this.subFields[C].getEl()==D){A=C;break}}if(A!=-1){this.removeElement(A)}},removeElement:function(B){var A=this.subFields[B].getEl().parentNode;this.subFields[B]=undefined;this.subFields=this.subFields.compact();A.parentNode.removeChild(A)}});inputEx.registerType("list",inputEx.ListField);inputEx.PasswordField=function(A){inputEx.PasswordField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.PasswordField,inputEx.Field,{renderComponent:function(){var A={};A.type="password";A.size=this.options.size;if(this.options.name){A.name=this.options.name}this.el=inputEx.cn("input",A);this.divEl.appendChild(this.el)}});inputEx.registerType("password",inputEx.PasswordField);inputEx.RTEField=function(A){inputEx.RTEField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.RTEField,inputEx.Field,{render:function(){this.divEl=inputEx.cn("div",{className:this.options.className});this.el=inputEx.cn("textarea",{id:"msgpost"});this.divEl.appendChild(this.el);var A=new YAHOO.widget.Editor("msgpost",{height:"300px",width:"522px",dompath:true});A.render()}});inputEx.registerType("html",inputEx.RTEField);inputEx.SelectField=function(A){inputEx.SelectField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.SelectField,inputEx.Field,{renderComponent:function(){this.el=inputEx.cn("select",{name:this.options.name||""});if(this.options.multiple){this.el.multiple=true;this.el.size=this.options.selectValues.length}this.optionEls=[];for(var A=0;A<this.options.selectValues.length;A++){this.optionEls[A]=inputEx.cn("option",{value:this.options.selectValues[A]},null,(this.options.selectOptions)?this.options.selectOptions[A]:this.options.selectValues[A]);this.el.appendChild(this.optionEls[A])}this.divEl.appendChild(this.el)},initEvents:function(){YAHOO.util.Event.addListener(this.el,"change",this.onChange,this,true)},setValue:function(D){var A=0;var C;for(var B=0;B<this.options.selectValues.length;B++){if(D===this.options.selectValues[B]){C=this.el.childNodes[B];C.selected="selected"}}},getValue:function(){return this.options.selectValues[this.el.selectedIndex]}});inputEx.registerType("select",inputEx.SelectField);inputEx.Textarea=function(A){inputEx.Textarea.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.Textarea,inputEx.Field,{setOptions:function(){inputEx.Textarea.superclass.setOptions.call(this);this.options.rows=this.options.rows||6;this.options.cols=this.options.cols||23},renderComponent:function(){this.el=inputEx.cn("textarea",{value:this.options.value,rows:this.options.rows,cols:this.options.cols});this.divEl.appendChild(this.el)}});inputEx.registerType("text",inputEx.Textarea);inputEx.UrlField=function(A){inputEx.UrlField.superclass.constructor.call(this,A)};YAHOO.lang.extend(inputEx.UrlField,inputEx.Field,{setOptions:function(){inputEx.UrlField.superclass.setOptions.call(this);this.options.className="inputEx-Field inputEx-UrlField";this.options.messages.invalid=inputEx.messages.invalidUrl},getValue:function(){return this.el.value.toLowerCase()},setValue:function(A){this.el.value=A;this.validate()},render:function(){inputEx.UrlField.superclass.render.call(this);this.el.size=27;this.favicon=inputEx.cn("img");this.divEl.insertBefore(this.favicon,this.el)},validate:function(){var B=this.getValue().match(inputEx.regexps.url);var A=B?(B[0]+"/favicon.ico"):inputEx.spacerUrl;if(A!=this.favicon.src){inputEx.sn(this.favicon,null,{visibility:"hidden"});this.favicon.src=A;if(this.timer){clearTimeout(this.timer)}var C=this;this.timer=setTimeout(function(){C.displayFavicon()},1000)}return !!B},displayFavicon:function(){inputEx.sn(this.favicon,null,{visibility:(this.favicon.naturalWidth!=0)?"visible":"hidden"})}});inputEx.messages.invalidUrl="Invalid URL, ex: http://www.test.com";inputEx.registerType("url",inputEx.UrlField);inputEx.TypeField=function(A){var C={};for(var B in A){if(A.hasOwnProperty(B)){C[B]=A[B]}}C.selectValues=[""];C.selectOptions=[""];for(var B in inputEx.typeClasses){C.selectValues.push(inputEx.typeClasses[B]);C.selectOptions.push(B)}inputEx.TypeField.superclass.constructor.call(this,C)};YAHOO.extend(inputEx.TypeField,inputEx.SelectField,{renderComponent:function(){inputEx.TypeField.superclass.renderComponent.call(this);this.groupOptionsWrapper=inputEx.cn("div");this.divEl.appendChild(this.groupOptionsWrapper);this.fieldWrapper=inputEx.cn("div");this.divEl.appendChild(this.fieldWrapper)},onChange:function(B){inputEx.TypeField.superclass.onChange.call(this,B);var A=this.getValue();if(A.groupOptions){if(this.group){this.group.close();this.groupOptionsWrapper.innerHTML=""}this.group=new inputEx.Group(A.groupOptions);this.groupOptionsWrapper.appendChild(this.group.getEl());this.group.updatedEvt.subscribe(this.updateFieldValue,this,true)}if(this.options.createValueField){if(this.fieldValue){this.fieldValue=null;this.fieldWrapper.innerHTML=""}this.updateFieldValue()}},updateFieldValue:function(){var A=null;if(this.fieldValue){A=this.fieldValue.getValue();this.fieldValue.close();this.fieldWrapper.innerHTML=""}var B=this.getValue();var C=this.group?this.group.getValue():null;this.fieldValue=new B(C);if(A){this.fieldValue.setValue(A)}this.fieldWrapper.appendChild(this.fieldValue.getEl())}});inputEx.registerType("type",inputEx.TypeField);inputEx.CheckBox.groupOptions=[{label:"Label",type:"string",optional:true,inputParams:{name:"label"}}];inputEx.ColorField.groupOptions=[];inputEx.EmailField.groupOptions=[];inputEx.IPv4Field.groupOptions=[];inputEx.PasswordField.groupOptions=[];inputEx.RTEField.groupOptions=[];inputEx.UrlField.groupOptions=[];inputEx.Textarea.groupOptions=[];inputEx.Field.groupOptions=[{label:"Numbers Only",type:"boolean",optional:true,inputParams:{name:"numbersOnly",checked:false}}];inputEx.SelectField.groupOptions=[{type:"list",inputParams:{name:"selectValues",listLabel:"selectValues",elementType:inputEx.Field,elementOptions:{},required:true}},{type:"list",optional:true,inputParams:{name:"selectOptions",listLabel:"selectOptions",elementType:inputEx.Field,elementOptions:{}}}];inputEx.ListField.groupOptions=[{name:"type",label:"of type",type:"type",inputParams:{required:true,createValueField:false}}]