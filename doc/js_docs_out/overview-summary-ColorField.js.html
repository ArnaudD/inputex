<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
InputEx Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="ColorField.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>ColorField.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'ColorField.js'<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="inputEx/ColorField.html">inputEx.ColorField</a></b></td>
    <td>inputEx.ColorField
 </td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/**
 * Create a Color picker input field
 *
 * <span class="attrib">@class</span>   inputEx.ColorField
 * <span class="attrib">@extends</span> inputEx.Field
 * <span class="attrib">@constructor</span>
 * <span class="attrib">@param</span> {Object} options same as parent class options
 */</span>
inputEx.ColorField = <span class="reserved">function</span>(options) {
	inputEx.ColorField.superclass.constructor.call(<span class="reserved">this</span>,options);
};
YAHOO.lang.extend(inputEx.ColorField, inputEx.Field, {
   
   renderComponent: <span class="reserved">function</span>() {
      
      <span class="comment">// A hidden input field to store the color code </span>
   	<span class="reserved">this</span>.el = inputEx.cn(<span class="literal">'input'</span>, {
   	   type: <span class="literal">'hidden'</span>, 
   	   name: <span class="reserved">this</span>.options.name || <span class="literal">''</span>, 
   	   value: <span class="reserved">this</span>.options.value || <span class="literal">'#DD7870'</span> });
   	   
   	<span class="comment">// Create a colored area</span>
   	<span class="reserved">this</span>.colorEl = inputEx.cn(<span class="literal">'div'</span>, {className: <span class="literal">'inputEx-ColorField'</span>}, {backgroundColor: <span class="reserved">this</span>.el.value});

   	<span class="comment">// Render the popup</span>
   	<span class="reserved">this</span>.renderPopUp();

   	<span class="comment">// Elements are bound to divEl</span>
   	<span class="reserved">this</span>.divEl.appendChild(<span class="reserved">this</span>.el);
   	<span class="reserved">this</span>.divEl.appendChild(<span class="reserved">this</span>.colorEl);
   },
   
   initEvents: <span class="reserved">function</span>() {
   	YAHOO.util.Event.addListener(<span class="reserved">this</span>.colorEl, <span class="literal">"click"</span>, <span class="reserved">this</span>.toggleColorPopUp, <span class="reserved">this</span>, true);
   	YAHOO.util.Event.addListener(<span class="reserved">this</span>.colorEl, <span class="literal">"blur"</span>, <span class="reserved">this</span>.closeColorPopUp, <span class="reserved">this</span>, true);
   },
   
   toggleColorPopUp: <span class="reserved">function</span>() {
   	<span class="reserved">if</span>( <span class="reserved">this</span>.visible ) {	<span class="reserved">this</span>.colorPopUp.style.display = <span class="literal">'none'</span>; }
   	<span class="reserved">else</span> { <span class="reserved">this</span>.colorPopUp.style.display = <span class="literal">'block'</span>; }
   	<span class="reserved">this</span>.visible = !<span class="reserved">this</span>.visible;
   },

   close: <span class="reserved">function</span>() {
      <span class="reserved">this</span>.closeColorPopUp();
   },

   closeColorPopUp: <span class="reserved">function</span>() {
   	<span class="reserved">this</span>.colorPopUp.style.display = <span class="literal">'none'</span>;
   	<span class="reserved">this</span>.visible = false;
   },
   
   renderPopUp: <span class="reserved">function</span>() {

     <span class="comment">// display or not the title</span>
     <span class="reserved">this</span>.displayTitle = <span class="reserved">this</span>.options.displayTitle || false;

   	<span class="comment">// set default color grid  to be used</span>
   	var defaultGrid = <span class="reserved">this</span>.options.auto || 1;

   	<span class="comment">// set colors available</span>
   	<span class="reserved">this</span>.colors = <span class="reserved">this</span>.options.colors || <span class="reserved">this</span>.setDefaultColors(defaultGrid);
   	<span class="reserved">this</span>.length = <span class="reserved">this</span>.colors.length;

   	<span class="comment">// set PopUp size ratio (default 16/9 ratio)</span>
   	<span class="reserved">this</span>.ratio = <span class="reserved">this</span>.options.ratio || [16,9];

   	<span class="comment">// set color grid dimensions</span>
   	<span class="reserved">this</span>.squaresPerLine = Math.ceil(Math.sqrt(<span class="reserved">this</span>.length*<span class="reserved">this</span>.ratio[0]/<span class="reserved">this</span>.ratio[1]));
   	<span class="reserved">this</span>.squaresPerColumn = Math.ceil(<span class="reserved">this</span>.length/<span class="reserved">this</span>.squaresPerLine);
   	<span class="reserved">this</span>.squaresOnLastLine = <span class="reserved">this</span>.squaresPerLine - (<span class="reserved">this</span>.squaresPerLine*<span class="reserved">this</span>.squaresPerColumn-<span class="reserved">this</span>.length);

   	<span class="comment">// set popup width</span>
   	var width = 30*<span class="reserved">this</span>.squaresPerLine+10;

   	<span class="comment">// keep the visible state of the popup</span>
   	<span class="reserved">this</span>.visible = false;

   	<span class="comment">// create the popup</span>
   	<span class="reserved">this</span>.colorPopUp = inputEx.cn(<span class="literal">'div'</span>, {className: <span class="literal">'inputEx-ColorField-popup'</span>}, {width: width+<span class="literal">'px'</span>, display: <span class="literal">'none'</span>});

   	<span class="comment">// create the title</span>
   	<span class="reserved">if</span> (<span class="reserved">this</span>.displayTitle) {
         var div = inputEx.cn(<span class="literal">'div'</span>, null, null, inputEx.messages.selectColor);
         <span class="reserved">this</span>.colorPopUp.appendChild( div );
      }

      var body = inputEx.cn(<span class="literal">'div'</span>);
      body.appendChild( <span class="reserved">this</span>.renderColorGrid() );
      <span class="reserved">this</span>.colorPopUp.appendChild(body);

      <span class="reserved">this</span>.divEl.appendChild(<span class="reserved">this</span>.colorPopUp);
   },
   
   setValue: <span class="reserved">function</span>(value) {
      <span class="reserved">this</span>.el.value = value;
      YAHOO.util.Dom.setStyle(<span class="reserved">this</span>.colorEl, <span class="literal">'background-color'</span>, <span class="reserved">this</span>.el.value);
   },
   
   setDefaultColors: <span class="reserved">function</span>(index) {
   	<span class="reserved">return</span> inputEx.ColorField.palettes[index-1];
   },
   
   
   <span class="comment">/**
    * This creates a color grid
    */</span>
   renderColorGrid: <span class="reserved">function</span>() {
   	var table = inputEx.cn(<span class="literal">'table'</span>);
   	var tbody = inputEx.cn(<span class="literal">'tbody'</span>);
   	<span class="reserved">for</span>(var i = 0; i&lt;<span class="reserved">this</span>.squaresPerColumn; i++) {
   		var line = inputEx.cn(<span class="literal">'tr'</span>);
   		<span class="reserved">for</span>(var j = 0; j&lt;<span class="reserved">this</span>.squaresPerLine; j++) {

   			<span class="comment">// spacer cells</span>
   			line.appendChild( inputEx.cn(<span class="literal">'td'</span>, null, {backgroundColor: <span class="literal">'#fff'</span>, lineHeight: <span class="literal">'10px'</span>, cursor: <span class="literal">'default'</span>}, <span class="literal">"&amp;nbsp;"</span>) );

   			<span class="comment">// fill remaining space with empty and inactive squares</span>
   			var square = inputEx.cn(<span class="literal">'td'</span>, null, {backgroundColor: <span class="literal">'#fff'</span>, lineHeight: <span class="literal">'10px'</span>, cursor: <span class="literal">'default'</span>}, <span class="literal">'&amp;nbsp;&amp;nbsp;&amp;nbsp;'</span>);

   		    <span class="reserved">if</span> (i===(<span class="reserved">this</span>.squaresPerColumn-1) &amp;&amp; j&gt;=<span class="reserved">this</span>.squaresOnLastLine ) {
   		       inputEx.sn(square, null, {backgroundColor: <span class="literal">'#fff'</span>, cursor: <span class="literal">'default'</span>});
   			 } 
   			 <span class="reserved">else</span> {
    			   <span class="comment">// create active squares</span>
   		      inputEx.sn(square, null, {backgroundColor: <span class="literal">'#'</span>+<span class="reserved">this</span>.colors[i*<span class="reserved">this</span>.squaresPerLine+j], cursor: <span class="literal">'pointer'</span>});
   				YAHOO.util.Event.addListener(square, <span class="literal">"mousedown"</span>, <span class="reserved">this</span>.onColorClick, <span class="reserved">this</span>, true );
   			 }   
             line.appendChild(square);
   		}
   		tbody.appendChild(line);

   		<span class="comment">// spacer line</span>
   		tbody.appendChild( inputEx.cn(<span class="literal">'tr'</span>, null, {height: <span class="literal">'8px'</span>}) );
   	}
   	table.appendChild(tbody);
   	<span class="reserved">return</span> table;
   },
   
   onColorClick: <span class="reserved">function</span>(e) {
      
   	var square = YAHOO.util.Event.getTarget(e);<span class="comment">//e.target;</span>
   	
   	var couleur = YAHOO.util.Dom.getStyle(square,<span class="literal">'background-color'</span>); 
   	YAHOO.util.Dom.setStyle(<span class="reserved">this</span>.colorEl,<span class="literal">'background-color'</span>,couleur);
   	
   	<span class="comment">// set hidden field value</span>
   	<span class="comment">// Convertit une chaine du style "rgb(255,142,0)" en hexadecimal du style "#FF8E00"</span>
     	var hexa = <span class="reserved">function</span> (rgbcolor) {
   	 <span class="comment">// Convertit un entier en hexa</span>
   	 var DecToHex = <span class="reserved">function</span> (n){
        var tblCode = new Array(<span class="literal">"0"</span>, <span class="literal">"1"</span>, <span class="literal">"2"</span>, <span class="literal">"3"</span>, <span class="literal">"4"</span>, <span class="literal">"5"</span>, <span class="literal">"6"</span>, <span class="literal">"7"</span>, <span class="literal">"8"</span>, <span class="literal">"9"</span>, <span class="literal">"A"</span>, <span class="literal">"B"</span>, <span class="literal">"C"</span>, <span class="literal">"D"</span>, <span class="literal">"E"</span>,<span class="literal">"F"</span>);
        var BASE=16;
        var Num = parseInt(n, 10);
        var i;
        var strHex = <span class="literal">""</span>;
        <span class="reserved">if</span> (! isNaN(Num)){
   	    <span class="reserved">if</span>(Num == <span class="literal">''</span>) <span class="reserved">return</span> <span class="literal">"00"</span>; 
          <span class="reserved">while</span> (Num&gt;0){
             i=0;
             <span class="reserved">while</span>(Num/Math.pow(BASE, i++)&gt;=BASE);
             strHex += tblCode[Math.floor(Num/Math.pow(BASE, i-1))];
             <span class="reserved">if</span> (Num%BASE==0) strHex+=<span class="literal">"0"</span>;
             Num = (Num % Math.pow(BASE, i-1));
          }
   	    <span class="reserved">if</span>(strHex.length == 1) {<span class="reserved">return</span> <span class="literal">'0'</span>+strHex;}
          <span class="reserved">return</span> strHex;
        }
        <span class="reserved">else</span> <span class="reserved">return</span> 0;
      };
      
   	var rgb = rgbcolor.split(/([(,)])/);
   	<span class="reserved">return</span> <span class="literal">'#'</span>+DecToHex(rgb[2])+DecToHex(rgb[4])+DecToHex(rgb[6]);
     };
     
   	<span class="reserved">this</span>.el.value = hexa(couleur);

   	<span class="comment">// Overlay closure</span>
   	<span class="reserved">this</span>.visible = !<span class="reserved">this</span>.visible;
   	<span class="reserved">this</span>.colorPopUp.style.display = <span class="literal">'none'</span>;
   	
   	<span class="reserved">this</span>.onChange();
   }
   
});

<span class="comment">// Specific message for the container</span>
inputEx.messages.selectColor = <span class="literal">"Select a color :"</span>;

<span class="comment">// Default palettes</span>
inputEx.ColorField.palettes = [
   [<span class="literal">"FFEA99"</span>,<span class="literal">"FFFF66"</span>,<span class="literal">"FFCC99"</span>,<span class="literal">"FFCAB2"</span>,<span class="literal">"FF99AD"</span>,<span class="literal">"FFD6FF"</span>,<span class="literal">"FF6666"</span>,<span class="literal">"E8EEF7"</span>,<span class="literal">"ADC2FF"</span>,<span class="literal">"ADADFF"</span>,<span class="literal">"CCFFFF"</span>,<span class="literal">"D6EAAD"</span>,<span class="literal">"B5EDBC"</span>,<span class="literal">"CCFF99"</span>],
   [<span class="literal">"55AAFF"</span>,<span class="literal">"FFAAFF"</span>,<span class="literal">"FF7FAA"</span>,<span class="literal">"FF0202"</span>,<span class="literal">"FFD42A"</span>,<span class="literal">"F9F93B"</span>,<span class="literal">"DF8181"</span>,<span class="literal">"FEE3E2"</span>,<span class="literal">"D47FFF"</span>,<span class="literal">"2AD4FF"</span>,<span class="literal">"2AFFFF"</span>,<span class="literal">"AAFFD4"</span>],
   [<span class="literal">"000000"</span>,<span class="literal">"993300"</span>,<span class="literal">"333300"</span>,<span class="literal">"003300"</span>,<span class="literal">"003366"</span>,<span class="literal">"000080"</span>,<span class="literal">"333399"</span>,<span class="literal">"333333"</span>,<span class="literal">"800000"</span>,<span class="literal">"FF6600"</span>,<span class="literal">"808000"</span>,<span class="literal">"008000"</span>,<span class="literal">"008080"</span>,<span class="literal">"0000FF"</span>,<span class="literal">"666699"</span>,<span class="literal">"808080"</span>,<span class="literal">"FF0000"</span>,<span class="literal">"FF9900"</span>,<span class="literal">"99CC00"</span>,<span class="literal">"339966"</span>,<span class="literal">"33CCCC"</span>,<span class="literal">"3366FF"</span>,<span class="literal">"800080"</span>,<span class="literal">"969696"</span>,<span class="literal">"FF00FF"</span>,<span class="literal">"FFCC00"</span>,<span class="literal">"FFFF00"</span>,<span class="literal">"00FF00"</span>,<span class="literal">"00FFFF"</span>,<span class="literal">"00CCFF"</span>,<span class="literal">"993366"</span>,<span class="literal">"C0C0C0"</span>,<span class="literal">"FF99CC"</span>,<span class="literal">"FFCC99"</span>,<span class="literal">"FFFF99"</span>,<span class="literal">"CCFFCC"</span>,<span class="literal">"CCFFFF"</span>,<span class="literal">"99CCFF"</span>,<span class="literal">"CC99FF"</span>,<span class="literal">"F0F0F0"</span>]
];



<span class="comment">/**
 * Register this class as "color" type
 */</span>
inputEx.registerType(<span class="literal">"color"</span>, inputEx.ColorField);
</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Sun Feb 24 19:49:22 2008</div>
</body>
</html>
