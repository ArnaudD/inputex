<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
InputEx Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="Group.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>Group.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'Group.js'<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="inputEx/Group.html">inputEx.Group</a></b></td>
    <td>inputEx.Group
 </td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/**
 * Handle a group of fields
 *
 * <span class="attrib">@class</span> inputEx.Group
 * <span class="attrib">@constructor</span>
 * <span class="attrib">@param</span> {Array} inputConfigs Array of input fields : { label: 'Enter the value:' , type: 'text' or fieldClass: inputEx.Field, optional: true/false, inputParams: {inputparams object} }
 */</span>
inputEx.Group = <span class="reserved">function</span>(inputConfigs) {

   <span class="comment">// Save the options locally</span>
   <span class="reserved">this</span>.inputConfigs = inputConfigs;
   
   <span class="comment">/**
    * Array containing the list of the field instances
    */</span>
   <span class="reserved">this</span>.inputs = [];
   
   <span class="comment">// Render the dom</span>
   <span class="reserved">this</span>.render();
   
	<span class="comment">/**
	 * YAHOO custom event "updated"
	 */</span>
	<span class="reserved">this</span>.updatedEvt = new YAHOO.util.CustomEvent(<span class="literal">'updated'</span>, <span class="reserved">this</span>);
	<span class="reserved">this</span>.updatedEvt.subscribe(<span class="reserved">function</span>(e, params) { var value = params[0]; console.log(<span class="literal">"updated"</span>,value); }, <span class="reserved">this</span>, true);
   
   <span class="comment">// Init the events</span>
   <span class="reserved">this</span>.initEvents();
};


inputEx.Group.<span class="reserved">prototype</span> = {

   <span class="comment">/**
    * Render the group
    */</span>
   render: <span class="reserved">function</span>() {
   
      <span class="comment">// Create the div wrapper for this group</span>
  	   <span class="reserved">this</span>.divEl = inputEx.cn(<span class="literal">'div'</span>, {className: <span class="literal">'inputEx-Group'</span>});
  	   
  	   <span class="reserved">this</span>.renderFields(<span class="reserved">this</span>.divEl);
  	  
   },
   
   <span class="comment">/**
    * Render all the fields.
    * We use the parentEl so that inputEx.Form can append them to the FORM tag
    */</span>
   renderFields: <span class="reserved">function</span>(parentEl) {
      
      <span class="comment">// Table containing non-optional fields</span>
  	   var tableNonOptional = inputEx.cn(<span class="literal">'table'</span>);
  	   var tbodyNonOptional = inputEx.cn(<span class="literal">'tbody'</span>);
  	   tableNonOptional.appendChild(tbodyNonOptional);
  	   
  	   <span class="comment">// Table containing optional fields</span>
  	   <span class="reserved">this</span>.tableOptional = inputEx.cn(<span class="literal">'table'</span>, {className: <span class="literal">'inputEx-Group-Options'</span>}, {display: <span class="literal">'none'</span>});
  	   var tbodyOptional = inputEx.cn(<span class="literal">'tbody'</span>);
  	   <span class="reserved">this</span>.tableOptional.appendChild(tbodyOptional);
  	   
      <span class="comment">// Iterate this.createInput on input fields</span>
      <span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputConfigs.length ; i++) {
         var input = <span class="reserved">this</span>.inputConfigs[i];

         var tr = inputEx.cn(<span class="literal">'tr'</span>);
         
         <span class="comment">// Label element</span>
         tr.appendChild( inputEx.cn(<span class="literal">'td'</span>, {className: <span class="literal">'inputEx-Group-label'</span>}, null, input.label || <span class="literal">""</span>) );
        
    	   <span class="comment">// Render the field (and adds it into this.inputs)</span>
    	   var field = <span class="reserved">this</span>.renderField(input);
    	   
    	   <span class="comment">// If the input has the "optional" parameter, put it in the optionsEl</span>
    	   var td = inputEx.cn(<span class="literal">'td'</span>);
         td.appendChild(field.getEl() );
         tr.appendChild(td);
            
         <span class="comment">// Select the tbody to insert the row into</span>
         var tbody = input.optional ? tbodyOptional : tbodyNonOptional;
         tbody.appendChild(tr);
  	   }
  	   
  	   <span class="comment">// Append the non-optional table</span>
  	   parentEl.appendChild(tableNonOptional);
  	  
  	   <span class="comment">// Options: toggle the element</span>
  	   <span class="reserved">if</span>(tbodyOptional.childNodes.length &gt; 0) {
 	      <span class="reserved">this</span>.optionsLabel = inputEx.cn(<span class="literal">'div'</span>, {className: <span class="literal">'inputEx-Group-Options-Label inputEx-Group-Options-Label-Collapsed'</span>});
 	      <span class="reserved">this</span>.optionsLabel.appendChild( inputEx.cn(<span class="literal">'img'</span>, {src: inputEx.spacerUrl}) );
 	      <span class="reserved">this</span>.optionsLabel.appendChild( inputEx.cn(<span class="literal">'span'</span>,null,null, <span class="literal">"Options"</span>) );
 	      parentEl.appendChild(<span class="reserved">this</span>.optionsLabel);
     	   parentEl.appendChild(<span class="reserved">this</span>.tableOptional);
  	   }
  	   
   },
  
   <span class="comment">/**
    * Instanciate one field given its parameters, type or fieldClass
    */</span>
   renderField: <span class="reserved">function</span>(input) {
      <span class="comment">/**
   	 * Get the class for this field: if "type" is specified, we call inputEx.getFieldClass 
   	 * otherwise, we look for the "fieldClass" parameter.
   	 */</span>
      var fieldClass = null;
   	<span class="reserved">if</span>(input.type) {
   	   fieldClass = inputEx.getFieldClass(input.type);
   	   <span class="reserved">if</span>(fieldClass === null) fieldClass = inputEx.Field;
   	}
   	<span class="reserved">else</span> {
   	   fieldClass = input.fieldClass ? input.fieldClass : inputEx.Field;
   	}

      <span class="comment">// Instanciate the field</span>
      var inputInstance = new fieldClass(input.inputParams);
   	<span class="reserved">this</span>.inputs.push(inputInstance);
   	
   	<span class="comment">// Subscribe to the field "updated" event to send the group "updated" event</span>
      inputInstance.updatedEvt.subscribe(<span class="reserved">this</span>.onChange, <span class="reserved">this</span>, true);
   	  
      <span class="reserved">return</span> inputInstance;
   },
  
   <span class="comment">/**
    * Init the events for the group
    */</span>
   initEvents: <span class="reserved">function</span>() {
      YAHOO.util.Event.addListener(<span class="reserved">this</span>.optionsLabel, <span class="literal">"click"</span>, <span class="reserved">this</span>.onClickOptionsLabel, <span class="reserved">this</span>, true);
   },
  
   <span class="comment">/**
    * Handle the click on the "Options" label
    */</span>
   onClickOptionsLabel: <span class="reserved">function</span>() {
      <span class="reserved">if</span>(<span class="reserved">this</span>.tableOptional.style.display == <span class="literal">'none'</span>) {
         <span class="reserved">this</span>.tableOptional.style.display = <span class="literal">''</span>;
         YAHOO.util.Dom.replaceClass(<span class="reserved">this</span>.optionsLabel, <span class="literal">"inputEx-Group-Options-Label-Collapsed"</span>, <span class="literal">"inputEx-Group-Options-Label-Expanded"</span>);
      }
      <span class="reserved">else</span> {
         <span class="reserved">this</span>.tableOptional.style.display = <span class="literal">'none'</span>;
         YAHOO.util.Dom.replaceClass(<span class="reserved">this</span>.optionsLabel, <span class="literal">"inputEx-Group-Options-Label-Expanded"</span>, <span class="literal">"inputEx-Group-Options-Label-Collapsed"</span>);
      }
   },
  
   <span class="comment">/**
    * Return the group wrapper DIV element
    */</span>
   getEl: <span class="reserved">function</span>() {
      <span class="reserved">return</span> <span class="reserved">this</span>.divEl;
   },
   
   <span class="comment">/**
    * Validate each field
    * <span class="attrib">@returns</span> {Boolean} true if all fields validate and required fields are not empty
    */</span>
   validate: <span class="reserved">function</span>() {

   	<span class="comment">// Validate all the sub fields</span>
   	<span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
   		var input = <span class="reserved">this</span>.inputs[i];
   		var state = input.getState();
   		<span class="reserved">if</span>( state == inputEx.Field.stateRequired || state == inputEx.Field.stateInvalid ) {
   			<span class="reserved">return</span> false;
   		}
      }
   	<span class="reserved">return</span> true;
   },
   
   <span class="comment">/**
    * Enable all fields in the group
    */</span>
   enable: <span class="reserved">function</span>() {
    	<span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
    	   <span class="reserved">this</span>.inputs[i].enable();
      }
   },
   
   <span class="comment">/**
    * Disable all fields in the group
    */</span>
   disable: <span class="reserved">function</span>() {
    	<span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
    	   <span class="reserved">this</span>.inputs[i].disable();
      }
   },
   
   <span class="comment">/**
    * Set the values of each field from a key/value hash object
    */</span>
   setValue: <span class="reserved">function</span>(oValues) { 
   	<span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
   		<span class="reserved">this</span>.inputs[i].setValue(oValues[<span class="reserved">this</span>.inputs[i].options.name] || <span class="literal">''</span>);
   		<span class="reserved">this</span>.inputs[i].setClassFromState();
      }
   },
   
   <span class="comment">/**
    * Return an object with all the values of the fields
    */</span>
   getValue: <span class="reserved">function</span>() {
   	var o = {};
   	<span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
   	   <span class="reserved">if</span>(<span class="reserved">this</span>.inputs[i].options.name) {
   		   o[<span class="reserved">this</span>.inputs[i].options.name] = <span class="reserved">this</span>.inputs[i].getValue();
		   }
      }
   	<span class="reserved">return</span> o;
   },
  
   <span class="comment">/**
    * Close the group (recursively calls "close" on each field, does NOT hide the group )
    * Call this function before hidding the group to close any field popup
    */</span>
   close: <span class="reserved">function</span>() {
      <span class="reserved">for</span> (var i = 0 ; i &lt; <span class="reserved">this</span>.inputs.length ; i++) {
  	      <span class="reserved">this</span>.inputs[i].close();
      }
   },
   
   <span class="comment">/**
    * Called when one of the field sent its "updated" event.
    */</span>
   onChange: <span class="reserved">function</span>() {
      
   	<span class="reserved">if</span>(<span class="reserved">this</span>.validate()) {
         <span class="comment">// We already escaped the stack here so we can fire it directly</span>
         <span class="reserved">this</span>.updatedEvt.fire(<span class="reserved">this</span>.getValue());
      }
   }
   
};

</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Sun Feb 24 19:49:22 2008</div>
</body>
</html>
