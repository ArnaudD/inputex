<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
InputEx Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="field.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>field.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		This files contains the 'Field' 
 class of <a href='http://inputEx.neyric.com'>inputEx</a>

 <BR/><BR/><B>Version: </B>0.1<BR/><BR/><B>Author:</B> Eric Abouaf eric.abouaf at centraliens.net
 <BR/>
	
</p>

<hr>



<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/** 
 * <span class="attrib">@fileoverview</span> This files contains the 'Field' 
 * class of {<span class="attrib">@link</span> http://inputEx.neyric.com inputEx}
 *
 * <span class="attrib">@dependencies</span> YAHOO.util.Dom, YAHOO.util.Event
 *
 * <span class="attrib">@author</span> Eric Abouaf eric.abouaf at centraliens.net
 * <span class="attrib">@version</span> 0.1 
 */</span>

<span class="comment">// defines YAHOO.inputEx namespace</span>
YAHOO.namespace(<span class="literal">'inputEx'</span>);

YAHOO.inputEx.messages = {
	required: <span class="literal">"This field is required"</span>,
	invalid: <span class="literal">"This field is invalid"</span>,
	valid: <span class="literal">"This field is valid"</span>
};

<span class="comment">/**
 * <span class="attrib">@class</span> YAHOO.inputEx.Field 
 * Create the dom and basic behaviour of a RUI field 
 *
 * options:
 *		- name (required): the name of the field
 *		- numbers: boolean
 *		- required: cannot be null and must validate
 *		- regexp: regular expression used to validate (otherwise it always validate)
 *		- noicon: this prevent the icon from being rendered (and the tooltip as well) (default to false)
 */</span>
YAHOO.inputEx.Field = <span class="reserved">function</span>(options) {
	
	<span class="comment">// Save the options locally</span>
	<span class="reserved">this</span>.options = options;
	
	<span class="comment">// Define default messages</span>
	<span class="reserved">this</span>.options.messages = <span class="reserved">this</span>.options.messages || {};
	<span class="reserved">this</span>.options.messages.required = <span class="reserved">this</span>.options.messages.required || YAHOO.inputEx.messages.required;
	<span class="reserved">this</span>.options.messages.invalid = <span class="reserved">this</span>.options.messages.invalid || YAHOO.inputEx.messages.invalid;
	<span class="reserved">this</span>.options.messages.valid = <span class="reserved">this</span>.options.messages.valid || YAHOO.inputEx.messages.valid;
	
	<span class="comment">// Call the render of the dom</span>
	<span class="reserved">this</span>.render();
	
	<span class="comment">// Set the initial value</span>
	<span class="reserved">if</span>(<span class="reserved">this</span>.options.value) {
		<span class="reserved">this</span>.setValue(<span class="reserved">this</span>.options.value);
	}
	
	<span class="comment">// initialize behaviour events</span>
	<span class="reserved">this</span>.initEvents();
	
	<span class="comment">// set the default styling</span>
	<span class="reserved">this</span>.setClassFromState();
};


<span class="comment">/**
 * Default render of the dom element
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.render = <span class="reserved">function</span>() {
	
	<span class="comment">// Create a DIV element to wrap the editing el and the image</span>
	<span class="reserved">this</span>.divEl = document.createElement(<span class="literal">'DIV'</span>);
	
	<span class="reserved">this</span>.el = document.createElement(<span class="literal">'INPUT'</span>);
	<span class="reserved">this</span>.el.type = <span class="literal">'text'</span>;
   <span class="reserved">this</span>.el.name = <span class="reserved">this</span>.options.name;
   <span class="reserved">this</span>.el.value = <span class="reserved">this</span>.options.value || <span class="literal">''</span>; <span class="comment">// modif par MAX //////////////</span>
	<span class="reserved">this</span>.el.size = <span class="reserved">this</span>.options.size || 20;
	YAHOO.util.Dom.addClass(<span class="reserved">this</span>.el, <span class="literal">'inputEx-field'</span>);
	<span class="reserved">this</span>.divEl.appendChild(<span class="reserved">this</span>.el);
	
	<span class="comment">// Create a div next to the field with an icon and a tooltip</span>
	<span class="reserved">if</span>( !<span class="reserved">this</span>.options.noicon ) {
		<span class="reserved">this</span>.imgEl = document.createElement(<span class="literal">'div'</span>);
		<span class="reserved">this</span>.imgEl.innerHTML = <span class="literal">'&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'</span>;
		YAHOO.util.Dom.addClass(<span class="reserved">this</span>.imgEl, <span class="literal">'inputEx-field-img'</span>);
	
	   <span class="comment">// TODO: random number</span>
   	<span class="reserved">this</span>.tooltip = new YAHOO.widget.Tooltip(<span class="literal">'random'</span>+<span class="reserved">this</span>.options.name, { context: <span class="reserved">this</span>.imgEl, text:<span class="literal">""</span> }); 
		YAHOO.util.Dom.setStyle(<span class="reserved">this</span>.tooltip.element, <span class="literal">'z-index'</span>, <span class="literal">'999'</span>);
		
		<span class="reserved">this</span>.divEl.appendChild(<span class="reserved">this</span>.imgEl);
	}
	
};

<span class="comment">/**
 * The default render creates a div to put in the messages
 */</span>

YAHOO.inputEx.Field.<span class="reserved">prototype</span>.getEl = <span class="reserved">function</span>() {
	<span class="reserved">return</span> <span class="reserved">this</span>.divEl;
};


<span class="comment">/**
 * Initialize events of the Input
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.initEvents = <span class="reserved">function</span>() {
	YAHOO.util.Event.addListener(<span class="reserved">this</span>.el, <span class="literal">"input"</span>, <span class="reserved">this</span>.onInput, <span class="reserved">this</span>, true);
	YAHOO.util.Event.addListener(<span class="reserved">this</span>.el, <span class="literal">"focus"</span>, <span class="reserved">this</span>.onFocus, <span class="reserved">this</span>, true);
	YAHOO.util.Event.addListener(<span class="reserved">this</span>.el, <span class="literal">"blur"</span>, <span class="reserved">this</span>.onBlur, <span class="reserved">this</span>, true);
};


<span class="comment">/**
 * Return the value of the input
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.getValue = <span class="reserved">function</span>() {
	<span class="reserved">return</span> <span class="reserved">this</span>.el.value;
};

<span class="comment">/**
 * Function to set the value
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.setValue = <span class="reserved">function</span>(val) {
	<span class="reserved">this</span>.el.value = val;
};

<span class="comment">/**
 * Set the styles for valid/invalide state
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.setClassFromState = <span class="reserved">function</span>() {
	
	<span class="reserved">if</span>( <span class="reserved">this</span>.previousState ) {
		YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.getEl(), <span class="literal">'inputEx-'</span>+<span class="reserved">this</span>.previousState );
	}
	<span class="reserved">this</span>.previousState = <span class="reserved">this</span>.getState();
	YAHOO.util.Dom.addClass(<span class="reserved">this</span>.getEl(), <span class="literal">'inputEx-'</span>+<span class="reserved">this</span>.previousState );
	
	<span class="reserved">this</span>.setToolTipMessage();
};

<span class="comment">/**
 * Set the tooltip message
 */</span> 
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.setToolTipMessage = <span class="reserved">function</span>() { 
	<span class="reserved">if</span>(<span class="reserved">this</span>.tooltip) {
	   var content = <span class="literal">""</span>;
		<span class="reserved">if</span>( <span class="reserved">this</span>.previousState == <span class="literal">'required'</span>) {
			content = <span class="literal">'&lt;div class="inputEx-tooltip-required"&gt;&lt;/div&gt; &lt;span&gt;'</span>+<span class="reserved">this</span>.options.messages.required+<span class="literal">'&lt;/span&gt;'</span>;
		}
		<span class="reserved">else</span> <span class="reserved">if</span>( <span class="reserved">this</span>.previousState == <span class="literal">'invalid'</span>) {
			content = <span class="literal">'&lt;div class="inputEx-tooltip-exclamation"&gt;&lt;/div&gt; &lt;span&gt;'</span>+<span class="reserved">this</span>.options.messages.invalid+<span class="literal">'&lt;/span&gt;'</span>;
		}
   	<span class="reserved">else</span> {
   		content = <span class="literal">'&lt;div class="inputEx-tooltip-validated"&gt;&lt;/div&gt; &lt;span&gt;'</span>+<span class="reserved">this</span>.options.messages.valid+<span class="literal">'&lt;/span&gt;'</span>;
   	}
   	<span class="reserved">this</span>.tooltip.setBody(content);
	}
};  

YAHOO.inputEx.Field.<span class="reserved">prototype</span>.onFocus = <span class="reserved">function</span>(e) {
	YAHOO.util.Dom.addClass(<span class="reserved">this</span>.getEl(), <span class="literal">'inputEx-focused'</span>);
};

YAHOO.inputEx.Field.<span class="reserved">prototype</span>.onBlur = <span class="reserved">function</span>(e) {
	YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.getEl(), <span class="literal">'inputEx-focused'</span>);
};

<span class="comment">/**
 * <span class="attrib">@method</span> getState
 * returns a string containing one of the following
 * states:
 */</span>
YAHOO.inputEx.Field.stateEmpty = <span class="literal">'empty'</span>;
YAHOO.inputEx.Field.stateRequired = <span class="literal">'required'</span>;
YAHOO.inputEx.Field.stateValid = <span class="literal">'valid'</span>;
YAHOO.inputEx.Field.stateInvalid = <span class="literal">'invalid'</span>;
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.getState = <span class="reserved">function</span>() { 
	
	<span class="comment">// if the field is empty :</span>
	<span class="reserved">if</span>( <span class="reserved">this</span>.getValue() === <span class="literal">''</span> ) {
		<span class="reserved">if</span>( <span class="reserved">this</span>.options.required) { 
			<span class="reserved">return</span> YAHOO.inputEx.Field.stateRequired; 
		}
		<span class="reserved">else</span> { 
			<span class="reserved">return</span> YAHOO.inputEx.Field.stateEmpty;  
		}
	}
	
	<span class="reserved">if</span>( <span class="reserved">this</span>.validate() ) {
		<span class="reserved">return</span> YAHOO.inputEx.Field.stateValid;
	}
	<span class="reserved">else</span> {
		<span class="reserved">return</span> YAHOO.inputEx.Field.stateInvalid;
	}
};

<span class="comment">/**
 * Validation of the field
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.validate = <span class="reserved">function</span>() { 
	<span class="comment">// if we are using a regular expression</span>
	<span class="reserved">if</span>( <span class="reserved">this</span>.options.regexp ) {
		<span class="reserved">return</span> <span class="reserved">this</span>.getValue().match(<span class="reserved">this</span>.options.regexp);
	}
   <span class="reserved">return</span> true;
};  

<span class="comment">/**
 * onInput event handler
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.onInput = <span class="reserved">function</span>(e) { 
	<span class="reserved">if</span>(<span class="reserved">this</span>.options.numbers) {
		YAHOO.util.Event.stopEvent(e);
		<span class="reserved">this</span>.setValue( (<span class="reserved">this</span>.getValue()).replace(/[^0-9]/g,<span class="literal">''</span>) );
	}
	
	<span class="reserved">this</span>.setClassFromState();
};  


<span class="comment">/**
 * Close the field and eventually opened popups...
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.close = <span class="reserved">function</span>() {
   <span class="comment">// Please override this function...</span>
};



<span class="comment">/**
 * Disable the field
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.disable = <span class="reserved">function</span>() {
   <span class="reserved">this</span>.el.disabled = true;
};

<span class="comment">/**
 * Enable the field
 */</span>
YAHOO.inputEx.Field.<span class="reserved">prototype</span>.enable = <span class="reserved">function</span>() {
   <span class="reserved">this</span>.el.disabled = false;
};

</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>InputEx</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Mon Jan 28 19:43:38 2008</div>
</body>
</html>
